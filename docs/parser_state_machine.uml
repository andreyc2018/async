@startuml

[*] --> StartingBlock
StartingBlock : expecting "{" or "cmd"
StartingBlock --> ExpectingCommands : "{"
StartingBlock --> CollectingCommands : "cmd"
ExpectingCommands --> StartingBlock : "}"
ExpectingCommands : : expecting "cmd"
ExpectingCommands --> CollectingCommands : "cmd"
CollectingCommands : expecting "cmd" or "}" or "{"
CollectingCommands --> DoneBlock : "{" or "}" or block_complete
DoneBlock : notifes processror about command block
DoneBlock --> StartingBlock

@enduml